
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Sample build repositories &#8212; repo2docker 0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Frequently Asked Questions (FAQ)" href="faq.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="sample-build-repositories">
<span id="samples"></span><h1>Sample build repositories<a class="headerlink" href="#sample-build-repositories" title="Permalink to this headline">¶</a></h1>
<p>There are many options for specifying your environment with <code class="docutils literal"><span class="pre">repo2docker</span></code>.
The following sections describe a few samples to get you started.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These files must be in the root of your repository, or in a folder called
<code class="docutils literal"><span class="pre">binder</span></code> that is in the root of your repository. If you include a folder
called <code class="docutils literal"><span class="pre">binder</span></code> in the root of your repository, then all build files <em>not</em>
inside this folder will be ignored.</p>
</div>
<div class="section" id="system-apt-packages">
<h2>System - APT Packages<a class="headerlink" href="#system-apt-packages" title="Permalink to this headline">¶</a></h2>
<p>It is possible to install packages using the Shell with the <code class="docutils literal"><span class="pre">apt.txt</span></code> file.
In this case we install <code class="docutils literal"><span class="pre">gfortran</span></code> which does not have an easy Python install.</p>
<div class="section" id="file-apt-txt">
<h3>File: <code class="docutils literal"><span class="pre">apt.txt</span></code><a class="headerlink" href="#file-apt-txt" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># testing to skip comments in this file</span>



<span class="n">gfortran</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="system-post-build-scripts">
<h2>System - Post-build scripts<a class="headerlink" href="#system-post-build-scripts" title="Permalink to this headline">¶</a></h2>
<p>It is possible to run scripts after you’ve built the environment specified in
your other files. This could be used to, for example, download data or run
some configuration scripts. For example, this will download and install a
Jupyter extension.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This file needs to be executable in order to work with <code class="docutils literal"><span class="pre">repo2docker</span></code>. If
you’re on Linux or macOS, run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="n">postBuild</span>
</pre></div>
</div>
<p>If you’re on windows, you can accomplish the same behavior with this
<code class="docutils literal"><span class="pre">git</span></code> command:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">update</span><span class="o">-</span><span class="n">index</span> <span class="o">--</span><span class="n">chmod</span><span class="o">=+</span><span class="n">x</span> <span class="n">postBuild</span>
</pre></div>
</div>
</div>
<div class="section" id="file-postbuild">
<h3>File: <code class="docutils literal"><span class="pre">postBuild</span></code><a class="headerlink" href="#file-postbuild" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="n">jupyter</span> <span class="n">nbextension</span> <span class="n">enable</span> <span class="o">--</span><span class="n">py</span> <span class="o">--</span><span class="n">sys</span><span class="o">-</span><span class="n">prefix</span> <span class="n">ipyleaflet</span>
</pre></div>
</div>
</div>
<div class="section" id="file-requirements-txt">
<h3>File: <code class="docutils literal"><span class="pre">requirements.txt</span></code><a class="headerlink" href="#file-requirements-txt" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ipyleaflet</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="system-specifying-runtime-environments">
<h2>System - Specifying runtime environments<a class="headerlink" href="#system-specifying-runtime-environments" title="Permalink to this headline">¶</a></h2>
<p>You can specify runtime environments (such as Python 2 or 3) with a
<code class="docutils literal"><span class="pre">runtime.txt</span></code> file.</p>
<div class="section" id="id1">
<h3>File: <code class="docutils literal"><span class="pre">requirements.txt</span></code><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">numpy</span>
</pre></div>
</div>
</div>
<div class="section" id="file-runtime-txt">
<h3>File: <code class="docutils literal"><span class="pre">runtime.txt</span></code><a class="headerlink" href="#file-runtime-txt" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span><span class="o">-</span><span class="mf">2.7</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="python-requirements-txt">
<h2>Python - Requirements.txt<a class="headerlink" href="#python-requirements-txt" title="Permalink to this headline">¶</a></h2>
<p>The simplest way to specify Python packages is with a <code class="docutils literal"><span class="pre">requirements.txt</span></code> file
that is compatible with <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span></code>.</p>
<div class="section" id="id2">
<h3>File: <code class="docutils literal"><span class="pre">requirements.txt</span></code><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">numpy</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="julia-require">
<h2>Julia - REQUIRE<a class="headerlink" href="#julia-require" title="Permalink to this headline">¶</a></h2>
<p>The simplest way to specify dependencies in Julia, a REQUIRE file simply
lists the names of packages. Each one will be installed but not pre-compiled.
In this case, we also specify python dependencies with an <code class="docutils literal"><span class="pre">environment.yml</span></code>
file.</p>
<div class="section" id="file-environment-yml">
<h3>File: <code class="docutils literal"><span class="pre">environment.yml</span></code><a class="headerlink" href="#file-environment-yml" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dependencies</span><span class="p">:</span>

  <span class="o">-</span> <span class="n">matplotlib</span>
</pre></div>
</div>
</div>
<div class="section" id="file-require">
<h3>File: <code class="docutils literal"><span class="pre">REQUIRE</span></code><a class="headerlink" href="#file-require" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">PyPlot</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="docker-specifying-dependencies">
<h2>Docker - Specifying dependencies<a class="headerlink" href="#docker-specifying-dependencies" title="Permalink to this headline">¶</a></h2>
<p>You can specify dependencies with Dockerfiles, which may be more flexible
in running non-standard code. We recommend sourcing your Dockerfile from
one of the Jupyter base images. In this case, we use a stripped-down image
that has minimal dependencies installed.</p>
<div class="section" id="file-dockerfile">
<h3>File: <code class="docutils literal"><span class="pre">Dockerfile</span></code><a class="headerlink" href="#file-dockerfile" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">FROM</span> <span class="n">jupyter</span><span class="o">/</span><span class="n">base</span><span class="o">-</span><span class="n">notebook</span><span class="p">:</span><span class="n">b4dd11e16ae4</span>



<span class="n">RUN</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">there</span>

<span class="n">ADD</span> <span class="n">verify</span> <span class="n">verify</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="docker-legacy-dockerfiles">
<h2>Docker - Legacy Dockerfiles<a class="headerlink" href="#docker-legacy-dockerfiles" title="Permalink to this headline">¶</a></h2>
<p>This demonstrates the Dockerfile syntax that was often found in the first
version of Binder. It sources the <code class="docutils literal"><span class="pre">andrewosh</span></code> Docker image, which
contained many different dependencies, then installs Julia. We encourage
users to source one of the Jupyter base images as they are more streamlined.</p>
<div class="section" id="id3">
<h3>File: <code class="docutils literal"><span class="pre">Dockerfile</span></code><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">FROM</span> <span class="n">andrewosh</span><span class="o">/</span><span class="n">binder</span><span class="o">-</span><span class="n">base</span>



<span class="n">USER</span> <span class="n">root</span>



<span class="c1"># Add Julia dependencies</span>

<span class="n">RUN</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>

<span class="n">RUN</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">julia</span> <span class="n">libnettle4</span> <span class="o">&amp;&amp;</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">clean</span>



<span class="n">USER</span> <span class="n">main</span>



<span class="c1"># Install Julia kernel</span>

<span class="n">RUN</span> <span class="n">julia</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;Pkg.add(&quot;IJulia&quot;)&#39;</span>

<span class="n">RUN</span> <span class="n">julia</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;Pkg.add(&quot;Gadfly&quot;)&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">julia</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;Pkg.add(&quot;RDatasets&quot;)&#39;</span>



<span class="n">ADD</span> <span class="n">verify</span> <span class="n">verify</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="docker-running-scripts">
<h2>Docker - Running scripts<a class="headerlink" href="#docker-running-scripts" title="Permalink to this headline">¶</a></h2>
<p>It’s possible to run scripts using Docker in your build. In this case, we run
a simple shell script after installing dependencies. However, we recommend
that you see if it’s possible to accomplish what you want using <code class="docutils literal"><span class="pre">apt</span></code> and
<code class="docutils literal"><span class="pre">postInstall</span></code> files, and use Dockerfiles only when necessary.</p>
<div class="section" id="id4">
<h3>File: <code class="docutils literal"><span class="pre">Dockerfile</span></code><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">FROM</span> <span class="n">python</span><span class="p">:</span><span class="mf">3.5</span>



<span class="n">ENTRYPOINT</span> <span class="s2">&quot;/bin/sh&quot;</span>



<span class="n">ADD</span> <span class="n">sayhi</span><span class="o">.</span><span class="n">sh</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">sayhi</span><span class="o">.</span><span class="n">sh</span>

<span class="n">ADD</span> <span class="n">verify</span> <span class="n">verify</span>
</pre></div>
</div>
</div>
<div class="section" id="file-sayhi-sh">
<h3>File: <code class="docutils literal"><span class="pre">sayhi.sh</span></code><a class="headerlink" href="#file-sayhi-sh" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="n">echo</span> <span class="n">hi</span>

<span class="n">exit</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="conda-mixed-requirements">
<h2>Conda - Mixed Requirements<a class="headerlink" href="#conda-mixed-requirements" title="Permalink to this headline">¶</a></h2>
<p>An <code class="docutils literal"><span class="pre">environment.yml</span></code> takes precedence over <code class="docutils literal"><span class="pre">requirements.txt</span></code>.
To install Python packages into a conda environment with pip, use the <code class="docutils literal"><span class="pre">pip</span></code> key in <code class="docutils literal"><span class="pre">environment.yml</span></code>:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">dependencies</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">numpy</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">pip</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">tornado</span>
</pre></div>
</div>
<div class="section" id="id5">
<h3>File: <code class="docutils literal"><span class="pre">environment.yml</span></code><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dependencies</span><span class="p">:</span>

  <span class="o">-</span> <span class="n">numpy</span>

  <span class="o">-</span> <span class="n">pip</span><span class="p">:</span>

    <span class="o">-</span> <span class="n">simplejson</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h3>File: <code class="docutils literal"><span class="pre">requirements.txt</span></code><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">there</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="conda-environment">
<h2>Conda Environment<a class="headerlink" href="#conda-environment" title="Permalink to this headline">¶</a></h2>
<p>Conda environments files may allow for more complex builds and dependencies. You
can specify them in the standard <cite>environment.yml</cite> files.</p>
<div class="section" id="id7">
<h3>File: <code class="docutils literal"><span class="pre">environment.yml</span></code><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p><strong>Contents</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dependencies</span><span class="p">:</span>

  <span class="o">-</span> <span class="n">numpy</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.svg" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Sample build repositories</a><ul>
<li><a class="reference internal" href="#system-apt-packages">System - APT Packages</a><ul>
<li><a class="reference internal" href="#file-apt-txt">File: <code class="docutils literal"><span class="pre">apt.txt</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#system-post-build-scripts">System - Post-build scripts</a><ul>
<li><a class="reference internal" href="#file-postbuild">File: <code class="docutils literal"><span class="pre">postBuild</span></code></a></li>
<li><a class="reference internal" href="#file-requirements-txt">File: <code class="docutils literal"><span class="pre">requirements.txt</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#system-specifying-runtime-environments">System - Specifying runtime environments</a><ul>
<li><a class="reference internal" href="#id1">File: <code class="docutils literal"><span class="pre">requirements.txt</span></code></a></li>
<li><a class="reference internal" href="#file-runtime-txt">File: <code class="docutils literal"><span class="pre">runtime.txt</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-requirements-txt">Python - Requirements.txt</a><ul>
<li><a class="reference internal" href="#id2">File: <code class="docutils literal"><span class="pre">requirements.txt</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#julia-require">Julia - REQUIRE</a><ul>
<li><a class="reference internal" href="#file-environment-yml">File: <code class="docutils literal"><span class="pre">environment.yml</span></code></a></li>
<li><a class="reference internal" href="#file-require">File: <code class="docutils literal"><span class="pre">REQUIRE</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#docker-specifying-dependencies">Docker - Specifying dependencies</a><ul>
<li><a class="reference internal" href="#file-dockerfile">File: <code class="docutils literal"><span class="pre">Dockerfile</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#docker-legacy-dockerfiles">Docker - Legacy Dockerfiles</a><ul>
<li><a class="reference internal" href="#id3">File: <code class="docutils literal"><span class="pre">Dockerfile</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#docker-running-scripts">Docker - Running scripts</a><ul>
<li><a class="reference internal" href="#id4">File: <code class="docutils literal"><span class="pre">Dockerfile</span></code></a></li>
<li><a class="reference internal" href="#file-sayhi-sh">File: <code class="docutils literal"><span class="pre">sayhi.sh</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conda-mixed-requirements">Conda - Mixed Requirements</a><ul>
<li><a class="reference internal" href="#id5">File: <code class="docutils literal"><span class="pre">environment.yml</span></code></a></li>
<li><a class="reference internal" href="#id6">File: <code class="docutils literal"><span class="pre">requirements.txt</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conda-environment">Conda Environment</a><ul>
<li><a class="reference internal" href="#id7">File: <code class="docutils literal"><span class="pre">environment.yml</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="faq.html" title="previous chapter">Frequently Asked Questions (FAQ)</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/samples.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Project Jupyter.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/samples.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>